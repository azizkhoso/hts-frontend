"use strict";(self.webpackChunkhts_frontend=self.webpackChunkhts_frontend||[]).push([[480],{3962:function(e,n,s){s.r(n),s.d(n,{default:function(){return We}});var r=s(9439),t=s(3400),l=s(890),a=s(2791),i=s(6871),o=s(7607),c=s(6205),d=s(1405),u=s(9953),m=s(3767),h=s(493),x=s(4721),f=s(2627),j=s(7064),v=s(9900),Z=s(9310),g=s(3154),p=s(5923),w=s(8871),b=s(6739),C=s(6949),N=s.p+"static/media/student.51b2c35a9a156e0ea0a0.png",y=s.p+"static/media/teacher.73a396c9f868ee64bba0.png";var S=s.p+"static/media/request.d2eb88879d61411ddb7f5d6ad70d7473.svg",A=s(184);function T(e){var n=e.handleClose,s=(0,i.s0)(),r=(0,i.TH)(),l=[{title:"Dashboard",link:"/admin/dashboard",icon:(0,A.jsx)(Z.Z,{})},{title:"Announcements",link:"/admin/announcements",icon:(0,A.jsx)(g.Z,{})},{title:"Students",link:"/admin/students",icon:(0,A.jsx)("img",{src:N,alt:"student",className:"w-6 h-6"})},{title:"Teachers",link:"/admin/teachers",icon:(0,A.jsx)("img",{src:y,alt:"teacher",className:"w-6 h-6"})},{title:"Tests",link:"/admin/tests",icon:(0,A.jsx)(p.Z,{})},{title:"Test Applications",link:"/admin/test-applications",icon:(0,A.jsx)("img",{src:S,alt:"teacher",className:"w-6 h-6"})},{title:"Profile",link:"/admin/profile",icon:(0,A.jsx)(w.Z,{})}];return(0,A.jsxs)(m.Z,{sx:{width:"100%"},children:[(0,A.jsx)("span",{className:"flex justify-end md:hidden",children:(0,A.jsx)(t.Z,{onClick:function(){return n()},children:(0,A.jsx)(b.Z,{})})}),(0,A.jsx)("img",{src:C,alt:"hts",className:"self-center w-40 my-3"}),(0,A.jsxs)(h.Z,{sx:{py:0},children:[(0,A.jsx)(x.Z,{orientation:"horizontal"}),l.map((function(e){return(0,A.jsxs)(f.Z,{className:"".concat(r.pathname.startsWith(e.link)&&"bg-blue-100"),onClick:function(){return s(e.link)},children:[(0,A.jsx)(j.Z,{children:e.icon}),(0,A.jsx)(v.Z,{primary:e.title})]},e.title)}))]})]})}function q(e){var n=e.open,s=e.setOpen;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{className:"hidden md:block md:w-3/12 lg:w-3/12 2xl:w-2/12",children:(0,A.jsx)(u.ZP,{variant:"permanent",sx:{width:"100%"},classes:{paper:"md:w-3/12 lg:w-3/12 2xl:w-2/12"},children:(0,A.jsx)(T,{})})}),(0,A.jsx)("div",{className:"block md:hidden",children:(0,A.jsx)(u.ZP,{variant:"temporary",open:n,onClose:function(){return s(!1)},children:(0,A.jsx)(T,{handleClose:function(){return s(!1)}})})})]})}T.defaultProps={handleClose:function(){}};var D=s(3239),B=s(6151),k=s(9281),I=s(7621),z=s(9836),_=s(6890),F=s(5855),P=s(3994),R=s(3382),W=s(8087),E=s(8820),Q=s(5397),M=s(8991),O=s(1933),L=s(1413),U=s(4569),V=s.n(U),Y=V().create({baseURL:"".concat("/api","/admin")});function H(){return Y.get("/announcements")}function K(){return Y.get("/tests")}Y.interceptors.request.use((function(e){return(0,L.Z)((0,L.Z)({},e),{},{headers:(0,L.Z)((0,L.Z)({},e.headers),{},{common:(0,L.Z)((0,L.Z)({},e.headers.common),{},{authorization:"Bearer ".concat(localStorage.getItem("hts-token"))})})})}));var J=s(1774),X=s(3433),G=s(7391),$=s(9321),ee=s(3786),ne=s(911),se=s(5705),re=s(132),te=s(5289),le=s(5661),ae=s(9157),ie=s(5984);function oe(e){var n=e.open,s=e.handleClose,r=e.handleSubmit,t=a.useRef(),i=re.Ry({statement:re.Z_().required("Question Statement is required").min(3,"Enter at least 3 characters"),image:re.nK().test("fileSize","File should not be larger than 30kB",(function(e){return!e||e.size<=3e4})),A:re.Z_().required("Option A is required"),B:re.Z_().required("Option B is required"),C:re.Z_().required("Option C is required"),D:re.Z_().required("Option D is required"),answer:re.Z_().required("Correct Option is required"),duration:re.Rx().required("Duration is required").min(5,"At least 5 seconds should be given").max(180,"At most 3 minutes (180s) should be given")}),o=(0,se.TA)({initialValues:{statement:"",image:null,A:"",B:"",C:"",D:"",answer:"A",duration:5},validationSchema:i,onSubmit:function(e){o.resetForm(),r((0,L.Z)((0,L.Z)({},e),{},{type:"MCQS",id:(0,ie.x0)(11)})),s()}});return a.useEffect((function(){return o.resetForm()}),[]),(0,A.jsx)(te.Z,{open:n,onClose:function(){return s()},PaperProps:{sx:{minWidth:{xs:"90%",lg:"80vw",xl:"60vw"}}},children:(0,A.jsxs)("form",{onSubmit:o.handleSubmit,className:"flex flex-col w-full",children:[(0,A.jsx)(le.Z,{className:"text-center",children:"New MCQS Question"}),(0,A.jsx)(ae.Z,{style:{paddingTop:"0.5rem"},children:(0,A.jsxs)(m.Z,{spacing:1,children:[(0,A.jsx)(G.Z,{variant:"outlined",onChange:o.handleChange,size:"small",name:"statement",label:"Question Statement",fullWidth:!0,value:o.values.statement,error:o.touched.statement&&o.errors.statement,helperText:o.touched&&o.errors.statement}),(0,A.jsxs)("div",{className:"".concat(o.errors.image?"border-red-500":""," flex flex-col w-full border rounded-lg"),children:[(0,A.jsx)("img",{className:"self-center w-full max-w-xs",src:t&&t.current&&t.current.files[0]&&URL.createObjectURL(t.current.files[0]),alt:"preview"}),(0,A.jsx)("input",{type:"file",accept:"image/*",ref:t,onChange:function(e){var n=e.target;return o.setFieldValue("image",n.files[0])}}),o.errors.image&&(0,A.jsx)("small",{className:"text-red-500",children:o.errors.image})]}),(0,A.jsxs)("div",{className:"flex items-center gap-3",children:[(0,A.jsx)(l.Z,{variant:"h6",children:"A."}),(0,A.jsx)(G.Z,{variant:"outlined",onChange:o.handleChange,size:"small",name:"A",className:"flex-grow",value:o.values.A,error:o.touched.A&&o.errors.A,helperText:o.touched.A&&o.errors.A})]}),(0,A.jsxs)("div",{className:"flex items-center gap-3",children:[(0,A.jsx)(l.Z,{variant:"h6",children:"B."}),(0,A.jsx)(G.Z,{variant:"outlined",onChange:o.handleChange,size:"small",name:"B",className:"flex-grow",value:o.values.B,error:o.touched.B&&o.errors.B,helperText:o.touched.B&&o.errors.B})]}),(0,A.jsxs)("div",{className:"flex items-center gap-3",children:[(0,A.jsx)(l.Z,{variant:"h6",children:"C."}),(0,A.jsx)(G.Z,{variant:"outlined",onChange:o.handleChange,size:"small",name:"C",className:"flex-grow",value:o.values.C,error:o.touched.C&&o.errors.C,helperText:o.touched.C&&o.errors.C})]}),(0,A.jsxs)("div",{className:"flex items-center gap-3",children:[(0,A.jsx)(l.Z,{variant:"h6",children:"D."}),(0,A.jsx)(G.Z,{variant:"outlined",onChange:o.handleChange,size:"small",name:"D",className:"flex-grow",value:o.values.D,error:o.touched.D&&o.errors.D,helperText:o.touched.D&&o.errors.D})]}),(0,A.jsxs)("div",{className:"flex flex-col items-center gap-3 md:flex-row",children:[(0,A.jsxs)("div",{className:"flex items-stretch w-full gap-1 md:w-auto",children:[(0,A.jsx)(l.Z,{variant:"h6",children:"Correct Option:"}),(0,A.jsxs)($.Z,{variant:"outlined",className:"self-center flex-grow md:flex-grow-0",onChange:o.handleChange,size:"small",name:"answer",value:o.values.answer,error:o.touched.answer&&o.errors.answer,children:[(0,A.jsx)(ee.Z,{value:"A",children:"A"}),(0,A.jsx)(ee.Z,{value:"B",children:"B"}),(0,A.jsx)(ee.Z,{value:"C",children:"C"}),(0,A.jsx)(ee.Z,{value:"D",children:"D"})]})]}),(0,A.jsx)("span",{className:"flex-grow hidden md:block"}),(0,A.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row",children:[(0,A.jsxs)("div",{className:"flex items-center gap-1",children:[(0,A.jsx)(l.Z,{variant:"h6",children:"Duration:"}),(0,A.jsx)(G.Z,{variant:"outlined",size:"small",type:"number",InputProps:{endAdornment:"Seconds"},name:"duration",onChange:o.handleChange,value:o.values.duration,error:o.touched.duration&&o.errors.duration,helperText:o.touched.duration&&o.errors.duration})]}),(0,A.jsx)(B.Z,{variant:"outlined",color:"error",className:"md:self-center",startIcon:(0,A.jsx)(b.Z,{}),onClick:function(){o.resetForm(),s()},children:"Cancel"}),(0,A.jsx)(B.Z,{variant:"outlined",type:"submit",className:"md:self-center",startIcon:(0,A.jsx)(W.Z,{}),children:"Add"})]})]})]})})]})})}function ce(e){var n=e.open,s=e.handleClose,r=e.handleSubmit,t=a.useRef(),i=re.Ry({statement:re.Z_().required("Question Statement is required").min(3,"Enter at least 3 characters"),image:re.nK().test("fileSize","File should not be larger than 30kB",(function(e){return!e||e.size<=3e4})),answer:re.Z_().required("Answer is required"),duration:re.Rx().required("Duration is required").min(5,"At least 5 seconds should be given").max(180,"At most 3 minutes (180s) should be given")}),o=(0,se.TA)({initialValues:{statement:"",answer:"",duration:5},validationSchema:i,onSubmit:function(e){o.resetForm(),r((0,L.Z)((0,L.Z)({},e),{},{type:"Blank",id:(0,ie.x0)(11)})),s()}});return(0,A.jsx)(te.Z,{open:n,onClose:function(){return s()},PaperProps:{sx:{minWidth:{xs:"90%",lg:"80vw",xl:"60vw"}}},children:(0,A.jsxs)("form",{onSubmit:o.handleSubmit,className:"flex flex-col w-full",children:[(0,A.jsx)(le.Z,{className:"text-center",children:"New Blank Question"}),(0,A.jsx)(ae.Z,{style:{paddingTop:"0.5rem"},children:(0,A.jsxs)(m.Z,{spacing:1,children:[(0,A.jsx)(G.Z,{variant:"outlined",onChange:o.handleChange,size:"small",name:"statement",label:"Question Statement",fullWidth:!0,value:o.values.statement,error:o.touched.statement&&Boolean(o.errors.statement),helperText:o.touched&&o.errors.statement}),(0,A.jsxs)("div",{className:"".concat(o.errors.image?"border-red-500":""," flex flex-col w-full border rounded-lg"),children:[(0,A.jsx)("img",{className:"self-center w-full max-w-xs",src:t&&t.current&&t.current.files[0]&&URL.createObjectURL(t.current.files[0]),alt:"preview"}),(0,A.jsx)("input",{type:"file",accept:"image/*",ref:t,onChange:function(e){var n=e.target;return o.setFieldValue("image",n.files[0])}}),o.errors.image&&(0,A.jsx)("small",{className:"text-red-500",children:o.errors.image})]}),(0,A.jsx)(G.Z,{variant:"outlined",onChange:o.handleChange,size:"small",name:"answer",label:"Answer",value:o.values.answer,error:o.touched.answer&&Boolean(o.errors.answer),helperText:o.touched&&o.errors.answer}),(0,A.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row",children:[(0,A.jsxs)("div",{className:"flex items-center gap-1",children:[(0,A.jsx)(l.Z,{variant:"h6",children:"Duration:"}),(0,A.jsx)(G.Z,{variant:"outlined",size:"small",type:"number",InputProps:{endAdornment:"Seconds"},name:"duration",onChange:o.handleChange,value:o.values.duration,error:o.touched.duration&&Boolean(o.errors.duration),helperText:o.touched.duration&&o.errors.duration})]}),(0,A.jsx)("div",{className:"flex-grow"}),(0,A.jsx)(B.Z,{variant:"outlined",color:"error",className:"md:self-center",startIcon:(0,A.jsx)(b.Z,{}),onClick:function(){o.resetForm(),s()},children:"Cancel"}),(0,A.jsx)(B.Z,{variant:"outlined",type:"submit",className:"md:self-center",startIcon:(0,A.jsx)(W.Z,{}),children:"Add"})]})]})})]})})}function de(e){var n=e.open,s=e.handleClose,r=e.handleSubmit,t=a.useRef(),i=re.Ry({statement:re.Z_().required("Question Statement is required").min(3,"Enter at least 3 characters"),image:re.nK().test("fileSize","File should not be larger than 30kB",(function(e){return!e||e.size<=3e4})),answer:re.Z_().required("Answer is required"),duration:re.Rx().required("Duration is required").min(5,"At least 5 seconds should be given").max(180,"At most 3 minutes (180s) should be given")}),o=(0,se.TA)({initialValues:{statement:"",answer:"True",duration:5},validationSchema:i,onSubmit:function(e){o.resetForm(),r((0,L.Z)((0,L.Z)({},e),{},{type:"TrueFalse",id:(0,ie.x0)(11)})),s()}});return(0,A.jsx)(te.Z,{open:n,onClose:function(){return s()},PaperProps:{sx:{minWidth:{xs:"90%",lg:"80vw",xl:"60vw"}}},children:(0,A.jsxs)("form",{onSubmit:o.handleSubmit,className:"flex flex-col w-full",children:[(0,A.jsx)(le.Z,{className:"text-center",children:"New True/False Question"}),(0,A.jsx)(ae.Z,{style:{paddingTop:"0.5rem"},children:(0,A.jsxs)(m.Z,{spacing:1,children:[(0,A.jsx)(G.Z,{variant:"outlined",onChange:o.handleChange,size:"small",name:"statement",label:"Question Statement",fullWidth:!0,value:o.values.statement,error:o.touched.statement&&Boolean(o.errors.statement),helperText:o.touched&&o.errors.statement}),(0,A.jsxs)("div",{className:"".concat(o.errors.image?"border-red-500":""," flex flex-col w-full border rounded-lg"),children:[(0,A.jsx)("img",{className:"self-center w-full max-w-xs",src:t&&t.current&&t.current.files[0]&&URL.createObjectURL(t.current.files[0]),alt:"preview"}),(0,A.jsx)("input",{type:"file",accept:"image/*",ref:t,onChange:function(e){var n=e.target;return o.setFieldValue("image",n.files[0])}}),o.errors.image&&(0,A.jsx)("small",{className:"text-red-500",children:o.errors.image})]}),(0,A.jsxs)("div",{className:"flex flex-col items-center gap-3 md:flex-row",children:[(0,A.jsxs)("div",{className:"flex items-stretch w-full gap-1 md:w-auto",children:[(0,A.jsx)(l.Z,{variant:"h6",children:"Answer:"}),(0,A.jsxs)($.Z,{variant:"outlined",className:"self-center flex-grow md:flex-grow-0",onChange:o.handleChange,size:"small",name:"answer",value:o.values.answer,error:o.touched.answer&&o.errors.answer,children:[(0,A.jsx)(ee.Z,{value:"True",children:"True"}),(0,A.jsx)(ee.Z,{value:"False",children:"False"})]})]}),(0,A.jsx)("span",{className:"flex-grow hidden md:block"}),(0,A.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row",children:[(0,A.jsxs)("div",{className:"flex items-center gap-1",children:[(0,A.jsx)(l.Z,{variant:"h6",children:"Duration:"}),(0,A.jsx)(G.Z,{variant:"outlined",size:"small",type:"number",InputProps:{endAdornment:"Seconds"},name:"duration",onChange:o.handleChange,value:o.values.duration,error:o.touched.duration&&o.errors.duration,helperText:o.touched.duration&&o.errors.duration})]}),(0,A.jsx)(B.Z,{variant:"outlined",color:"error",className:"md:self-center",startIcon:(0,A.jsx)(b.Z,{}),onClick:function(){o.resetForm(),s()},children:"Cancel"}),(0,A.jsx)(B.Z,{variant:"outlined",type:"submit",className:"md:self-center",startIcon:(0,A.jsx)(W.Z,{}),children:"Add"})]})]})]})})]})})}function ue(e){var n=e.question,s=e.open,r=e.handleClose,t=e.handleSubmit,i=a.useRef(),o=re.Ry({statement:re.Z_().required("Question Statement is required").min(3,"Enter at least 3 characters"),image:re.nK().test("fileSize","File should not be larger than 30kB",(function(e){return!e||e.size<=3e4})),A:re.Z_().required("Option A is required"),B:re.Z_().required("Option B is required"),C:re.Z_().required("Option C is required"),D:re.Z_().required("Option D is required"),answer:re.Z_().required("Correct Option is required"),duration:re.Rx().required("Duration is required").min(5,"At least 5 seconds should be given").max(180,"At most 3 minutes (180s) should be given")}),c=(0,se.TA)({initialValues:(0,L.Z)({},n),validationSchema:o,onSubmit:function(e){c.resetForm(),t((0,L.Z)((0,L.Z)({},e),{},{id:n.id})),r()}});return a.useEffect((function(){return c.resetForm()}),[]),(0,A.jsx)(te.Z,{open:s,onClose:function(){return r()},PaperProps:{sx:{minWidth:{xs:"90%",lg:"80vw",xl:"60vw"}}},children:(0,A.jsxs)("form",{onSubmit:c.handleSubmit,className:"flex flex-col w-full",children:[(0,A.jsx)(le.Z,{className:"text-center",children:"Update MCQS Question"}),(0,A.jsx)(ae.Z,{style:{paddingTop:"0.5rem"},children:(0,A.jsxs)(m.Z,{spacing:1,children:[(0,A.jsx)(G.Z,{variant:"outlined",onChange:c.handleChange,size:"small",name:"statement",label:"Question Statement",fullWidth:!0,value:c.values.statement,error:c.touched.statement&&c.errors.statement,helperText:c.touched&&c.errors.statement}),(0,A.jsxs)("div",{className:"".concat(c.errors.image?"border-red-500":""," flex flex-col w-full border rounded-lg"),children:[(0,A.jsx)("img",{className:"w-full",src:i&&i.current&&i.current.files[0]&&URL.createObjectURL(i.current.files[0])||("object"===typeof n.image?n.image.name?URL.createObjectURL(n.image):"":n.image),alt:"preview"}),(0,A.jsx)("input",{type:"file",accept:"image/*",ref:i,onChange:function(e){var n=e.target;return c.setFieldValue("image",n.files[0])}}),c.errors.image&&(0,A.jsx)("small",{className:"text-red-500",children:c.errors.image})]}),(0,A.jsxs)("div",{className:"flex items-center gap-3",children:[(0,A.jsx)(l.Z,{variant:"h6",children:"A."}),(0,A.jsx)(G.Z,{variant:"outlined",onChange:c.handleChange,size:"small",name:"A",className:"flex-grow",value:c.values.A,error:c.touched.A&&c.errors.A,helperText:c.touched.A&&c.errors.A})]}),(0,A.jsxs)("div",{className:"flex items-center gap-3",children:[(0,A.jsx)(l.Z,{variant:"h6",children:"B."}),(0,A.jsx)(G.Z,{variant:"outlined",onChange:c.handleChange,size:"small",name:"B",className:"flex-grow",value:c.values.B,error:c.touched.B&&c.errors.B,helperText:c.touched.B&&c.errors.B})]}),(0,A.jsxs)("div",{className:"flex items-center gap-3",children:[(0,A.jsx)(l.Z,{variant:"h6",children:"C."}),(0,A.jsx)(G.Z,{variant:"outlined",onChange:c.handleChange,size:"small",name:"C",className:"flex-grow",value:c.values.C,error:c.touched.C&&c.errors.C,helperText:c.touched.C&&c.errors.C})]}),(0,A.jsxs)("div",{className:"flex items-center gap-3",children:[(0,A.jsx)(l.Z,{variant:"h6",children:"D."}),(0,A.jsx)(G.Z,{variant:"outlined",onChange:c.handleChange,size:"small",name:"D",className:"flex-grow",value:c.values.D,error:c.touched.D&&c.errors.D,helperText:c.touched.D&&c.errors.D})]}),(0,A.jsxs)("div",{className:"flex flex-col items-center gap-3 md:flex-row",children:[(0,A.jsxs)("div",{className:"flex items-stretch w-full gap-1 md:w-auto",children:[(0,A.jsx)(l.Z,{variant:"h6",children:"Correct Option:"}),(0,A.jsxs)($.Z,{variant:"outlined",className:"self-center flex-grow md:flex-grow-0",onChange:c.handleChange,size:"small",name:"answer",value:c.values.answer,error:c.touched.answer&&c.errors.answer,children:[(0,A.jsx)(ee.Z,{value:"A",children:"A"}),(0,A.jsx)(ee.Z,{value:"B",children:"B"}),(0,A.jsx)(ee.Z,{value:"C",children:"C"}),(0,A.jsx)(ee.Z,{value:"D",children:"D"})]})]}),(0,A.jsx)("span",{className:"flex-grow hidden md:block"}),(0,A.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row",children:[(0,A.jsxs)("div",{className:"flex items-center gap-1",children:[(0,A.jsx)(l.Z,{variant:"h6",children:"Duration:"}),(0,A.jsx)(G.Z,{variant:"outlined",size:"small",type:"number",InputProps:{endAdornment:"Seconds"},name:"duration",onChange:c.handleChange,value:c.values.duration,error:c.touched.duration&&c.errors.duration,helperText:c.touched.duration&&c.errors.duration})]}),(0,A.jsx)(B.Z,{variant:"outlined",color:"error",className:"md:self-center",startIcon:(0,A.jsx)(b.Z,{}),onClick:function(){c.resetForm(),r()},children:"Cancel"}),(0,A.jsx)(B.Z,{variant:"outlined",type:"submit",className:"md:self-center",startIcon:(0,A.jsx)(E.Z,{}),children:"Update"})]})]})]})})]})})}function me(e){var n=e.open,s=e.handleClose,r=e.handleSubmit,t=e.question,i=a.useRef(),o=re.Ry({statement:re.Z_().required("Question Statement is required").min(3,"Enter at least 3 characters"),image:re.nK().test("fileSize","File should not be larger than 30kB",(function(e){return!e||e.size<=3e4})),answer:re.Z_().required("Answer is required"),duration:re.Rx().required("Duration is required").min(5,"At least 5 seconds should be given").max(180,"At most 3 minutes (180s) should be given")}),c=(0,se.TA)({initialValues:(0,L.Z)({},t),validationSchema:o,onSubmit:function(e){c.resetForm(),r((0,L.Z)({},e)),s()}});return(0,A.jsx)(te.Z,{open:n,onClose:function(){return s()},PaperProps:{sx:{minWidth:{xs:"90%",lg:"80vw",xl:"60vw"}}},children:(0,A.jsxs)("form",{onSubmit:c.handleSubmit,className:"flex flex-col w-full",children:[(0,A.jsx)(le.Z,{className:"text-center",children:"Update Blank Question"}),(0,A.jsx)(ae.Z,{style:{paddingTop:"0.5rem"},children:(0,A.jsxs)(m.Z,{spacing:1,children:[(0,A.jsx)(G.Z,{variant:"outlined",onChange:c.handleChange,size:"small",name:"statement",label:"Question Statement",fullWidth:!0,value:c.values.statement,error:c.touched.statement&&Boolean(c.errors.statement),helperText:c.touched&&c.errors.statement}),(0,A.jsxs)("div",{className:"".concat(c.errors.image?"border-red-500":""," flex flex-col w-full border rounded-lg"),children:[(0,A.jsx)("img",{className:"self-center w-full max-w-xs",src:i&&i.current&&i.current.files[0]&&URL.createObjectURL(i.current.files[0])||("object"===typeof t.image?t.image.name?URL.createObjectURL(t.image):"":t.image),alt:"preview"}),(0,A.jsx)("input",{type:"file",accept:"image/*",ref:i,onChange:function(e){var n=e.target;return c.setFieldValue("image",n.files[0])}}),c.errors.image&&(0,A.jsx)("small",{className:"text-red-500",children:c.errors.image})]}),(0,A.jsx)(G.Z,{variant:"outlined",onChange:c.handleChange,size:"small",name:"answer",label:"Answer",value:c.values.answer,error:c.touched.answer&&Boolean(c.errors.answer),helperText:c.touched&&c.errors.answer}),(0,A.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row",children:[(0,A.jsxs)("div",{className:"flex items-center gap-1",children:[(0,A.jsx)(l.Z,{variant:"h6",children:"Duration:"}),(0,A.jsx)(G.Z,{variant:"outlined",size:"small",type:"number",InputProps:{endAdornment:"Seconds"},name:"duration",onChange:c.handleChange,value:c.values.duration,error:c.touched.duration&&Boolean(c.errors.duration),helperText:c.touched.duration&&c.errors.duration})]}),(0,A.jsx)("div",{className:"flex-grow"}),(0,A.jsx)(B.Z,{variant:"outlined",color:"error",className:"md:self-center",startIcon:(0,A.jsx)(b.Z,{}),onClick:function(){c.resetForm(),s()},children:"Cancel"}),(0,A.jsx)(B.Z,{variant:"outlined",type:"submit",className:"md:self-center",startIcon:(0,A.jsx)(E.Z,{}),children:"Update"})]})]})})]})})}function he(e){var n=e.open,s=e.handleClose,r=e.handleSubmit,t=e.question,i=a.useRef(),o=re.Ry({statement:re.Z_().required("Question Statement is required").min(3,"Enter at least 3 characters"),image:re.nK().test("fileSize","File should not be larger than 30kB",(function(e){return!e||e.size<=3e4})),answer:re.Z_().required("Answer is required"),duration:re.Rx().required("Duration is required").min(5,"At least 5 seconds should be given").max(180,"At most 3 minutes (180s) should be given")}),c=(0,se.TA)({initialValues:(0,L.Z)({},t),validationSchema:o,onSubmit:function(e){c.resetForm(),r((0,L.Z)({},e)),s()}});return(0,A.jsx)(te.Z,{open:n,onClose:function(){return s()},PaperProps:{sx:{minWidth:{xs:"90%",lg:"80vw",xl:"60vw"}}},children:(0,A.jsxs)("form",{onSubmit:c.handleSubmit,className:"flex flex-col w-full",children:[(0,A.jsx)(le.Z,{className:"text-center",children:"New True/False Question"}),(0,A.jsx)(ae.Z,{style:{paddingTop:"0.5rem"},children:(0,A.jsxs)(m.Z,{spacing:1,children:[(0,A.jsx)(G.Z,{variant:"outlined",onChange:c.handleChange,size:"small",name:"statement",label:"Question Statement",fullWidth:!0,value:c.values.statement,error:c.touched.statement&&Boolean(c.errors.statement),helperText:c.touched&&c.errors.statement}),(0,A.jsxs)("div",{className:"".concat(c.errors.image?"border-red-500":""," flex flex-col w-full border rounded-lg"),children:[(0,A.jsx)("img",{className:"self-center w-full max-w-xs",src:i&&i.current&&i.current.files[0]&&URL.createObjectURL(i.current.files[0])||("object"===typeof t.image?t.image.name?URL.createObjectURL(t.image):"":t.image),alt:"preview"}),(0,A.jsx)("input",{type:"file",accept:"image/*",ref:i,onChange:function(e){var n=e.target;return c.setFieldValue("image",n.files[0])}}),c.errors.image&&(0,A.jsx)("small",{className:"text-red-500",children:c.errors.image})]}),(0,A.jsxs)("div",{className:"flex flex-col items-center gap-3 md:flex-row",children:[(0,A.jsxs)("div",{className:"flex items-stretch w-full gap-1 md:w-auto",children:[(0,A.jsx)(l.Z,{variant:"h6",children:"Answer:"}),(0,A.jsxs)($.Z,{variant:"outlined",className:"self-center flex-grow md:flex-grow-0",onChange:c.handleChange,size:"small",name:"answer",value:c.values.answer,error:c.touched.answer&&c.errors.answer,children:[(0,A.jsx)(ee.Z,{value:"True",children:"True"}),(0,A.jsx)(ee.Z,{value:"False",children:"False"})]})]}),(0,A.jsx)("span",{className:"flex-grow hidden md:block"}),(0,A.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row",children:[(0,A.jsxs)("div",{className:"flex items-center gap-1",children:[(0,A.jsx)(l.Z,{variant:"h6",children:"Duration:"}),(0,A.jsx)(G.Z,{variant:"outlined",size:"small",type:"number",InputProps:{endAdornment:"Seconds"},name:"duration",onChange:c.handleChange,value:c.values.duration,error:c.touched.duration&&c.errors.duration,helperText:c.touched.duration&&c.errors.duration})]}),(0,A.jsx)(B.Z,{variant:"outlined",color:"error",className:"md:self-center",startIcon:(0,A.jsx)(b.Z,{}),onClick:function(){c.resetForm(),s()},children:"Cancel"}),(0,A.jsx)(B.Z,{variant:"outlined",type:"submit",className:"md:self-center",startIcon:(0,A.jsx)(E.Z,{}),children:"Update"})]})]})]})})]})})}function xe(e){for(var n in e)e.hasOwnProperty(n)&&("object"===typeof e[n]&&null!==e[n]?xe(e[n]):"image"===n&&(e[n]=null));return e}var fe=["English","Math","Physics","Chemistery","Biology","MDCAT","ECAT","STS IBA","NTS","SPSC"];function je(){var e=a.useState(null),n=(0,r.Z)(e,2),s=n[0],o=n[1],c=(0,d.I0)(),u=(0,i.s0)(),h=Boolean(s);var x=(0,O.useMutation)((function(e){return function(e){var n=new FormData;return n.append("title",e.title),n.append("subject",e.subject),n.append("startsAt",e.startsAt),n.append("submittableBefore",e.submittableBefore),n.append("isDemo",Boolean(e.isDemo)),n.append("questions",JSON.stringify(e.questions)),e.questions.forEach((function(e){return n.append("images",e.image||"no image")})),Y.post("/tests",n,{headers:{"Content-Type":"multipart/form-data"}})}(e)}),{onSuccess:function(){c((0,J.ws)({message:"Test created successfully"})),localStorage.removeItem("#new-test"),u("../../tests")},onError:function(e){var n;return c((0,J.ry)({message:(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.data.error)||e.message}))}}),f=x.isLoading,j=x.mutate,v=re.Ry({title:re.Z_().required("Title is required").min(4,"Enter at least 4 characters"),subject:re.Z_().required("Subject is required"),startsAt:re.hT().min(new Date,"Test cannot be hold in past time"),submittableBefore:re.hT().min(new Date,"Test cannot be uploaded after end time").required("End time is required"),isDemo:re.Z_(),questions:re.IX().min(3,"The test should have at least 3 questions")}),Z=(0,se.TA)({initialValues:xe(JSON.parse(localStorage.getItem("#new-test")))||{title:"",subject:"English",startsAt:new Date,submittableBefore:new Date,isDemo:!1,questions:[]},validationSchema:v,onSubmit:function(e){return j(e)}});localStorage.setItem("#new-test",JSON.stringify(Z.values));var g=a.useState(null),p=(0,r.Z)(g,2),w=p[0],b=p[1],C=a.useState(!1),N=(0,r.Z)(C,2),y=N[0],S=N[1],T=a.useState(!1),q=(0,r.Z)(T,2),k=q[0],z=q[1],_=a.useState(!1),F=(0,r.Z)(_,2),P=F[0],R=F[1],U=a.useState(!1),V=(0,r.Z)(U,2),H=V[0],K=V[1],te=a.useState(!1),le=(0,r.Z)(te,2),ae=le[0],ie=le[1],je=a.useState(!1),ve=(0,r.Z)(je,2),Ze=ve[0],ge=ve[1];function pe(e){"MCQS"===e?(S(!0),o(null)):"Blank"===e?(z(!0),o(null)):"TrueFalse"===e&&(R(!0),o(null))}function we(e){var n=Z.values.questions.findIndex((function(n){return n.id===e.id})),s=[].concat((0,X.Z)(Z.values.questions.slice(0,n)),[(0,L.Z)({},e)],(0,X.Z)(Z.values.questions.slice(n+1)));Z.setFieldValue("questions",s)}return(0,A.jsxs)("form",{onSubmit:Z.handleSubmit,className:"flex flex-col w-full h-full gap-6",children:[(0,A.jsxs)("div",{className:"flex justify-between w-full gap-3 lg:w-11/12",children:[(0,A.jsx)(l.Z,{variant:"h6",align:"center",children:"New Test"}),(0,A.jsx)("div",{className:"flex items-center justify-center",children:(0,A.jsx)(B.Z,{disabled:f,variant:"outlined",type:"submit",children:f?(0,A.jsx)(D.Z,{}):"Upload"})})]}),(0,A.jsx)("table",{children:(0,A.jsxs)("tbody",{children:[(0,A.jsxs)("tr",{className:"flex flex-col justify-between w-full lg:w-2/3 2xl:w-2/6 md:flex-row",children:[(0,A.jsx)("td",{className:"min-w-fit",children:(0,A.jsx)(l.Z,{variant:"h6",color:"primary",children:"Title"})}),(0,A.jsx)("td",{children:(0,A.jsx)(G.Z,{variant:"outlined",placeholder:"Title",size:"small",className:"w-full sm:w-60",name:"title",onChange:Z.handleChange,value:Z.values.title,error:Z.touched.title&&Z.errors.title,helperText:Z.touched&&Z.errors.title})})]}),(0,A.jsxs)("tr",{className:"flex flex-col justify-between w-full lg:w-2/3 2xl:w-2/6 md:flex-row",children:[(0,A.jsx)("td",{className:"min-w-fit",children:(0,A.jsx)(l.Z,{variant:"h6",color:"primary",children:"Subject"})}),(0,A.jsx)("td",{children:(0,A.jsx)($.Z,{variant:"outlined",placeholder:"Subject",size:"small",className:"w-full sm:w-60",name:"subject",onChange:Z.handleChange,value:Z.values.subject,error:Z.touched.subject&&Z.errors.subject,helperText:Z.touched&&Z.errors.subject,children:fe.map((function(e){return(0,A.jsx)(ee.Z,{value:e,children:e})}))})})]}),(0,A.jsxs)("tr",{className:"flex flex-col justify-between w-full lg:w-2/3 2xl:w-2/6 md:flex-row",children:[(0,A.jsx)("td",{className:"min-w-fit",children:(0,A.jsx)(l.Z,{variant:"h6",color:"primary",children:"Starts at"})}),(0,A.jsx)("td",{children:(0,A.jsx)(G.Z,{type:"datetime-local",variant:"outlined",placeholder:"Title",size:"small",className:"w-full sm:w-60",name:"startsAt",onChange:Z.handleChange,value:M.Z.format(new Date(Z.values.startsAt),"YYYY-MM-DDThh:mm"),error:Z.touched.startsAt&&Z.errors.startsAt,helperText:Z.touched&&Z.errors.startsAt})})]}),(0,A.jsxs)("tr",{className:"flex flex-col justify-between w-full lg:w-2/3 2xl:w-2/6 md:flex-row",children:[(0,A.jsx)("td",{className:"min-w-fit",children:(0,A.jsx)(l.Z,{variant:"h6",color:"primary",children:"Submittable Before"})}),(0,A.jsx)("td",{children:(0,A.jsx)(G.Z,{type:"datetime-local",variant:"outlined",placeholder:"Title",size:"small",className:"w-full sm:w-60",name:"submittableBefore",onChange:Z.handleChange,value:M.Z.format(new Date(Z.values.submittableBefore),"YYYY-MM-DDThh:mm"),error:Z.touched.submittableBefore&&Z.errors.submittableBefore,helperText:Z.touched&&Z.errors.submittableBefore})})]}),(0,A.jsxs)("tr",{className:"flex flex-col justify-between w-full lg:w-2/3 2xl:w-2/6 md:flex-row",children:[(0,A.jsx)("td",{className:"min-w-fit",children:(0,A.jsx)(l.Z,{variant:"h6",color:"primary",children:"Is demo:"})}),(0,A.jsx)("td",{className:"flex justify-start w-full sm:w-60",children:(0,A.jsxs)($.Z,{size:"small",className:"w-full",name:"isDemo",onChange:Z.handleChange,value:Z.values.isDemo,error:Z.touched.isDemo&&Z.errors.isDemo,helperText:Z.touched&&Z.errors.isDemo,children:[(0,A.jsx)(ee.Z,{value:"true",children:"Yes"}),(0,A.jsx)(ee.Z,{value:"false",children:"No"})]})})]}),(0,A.jsxs)("tr",{className:"flex flex-col justify-between w-full lg:w-2/3 2xl:w-2/6 md:flex-row",children:[(0,A.jsx)("td",{children:(0,A.jsx)(l.Z,{variant:"h6",color:"primary",children:"Duration:"})}),(0,A.jsx)("td",{children:(0,A.jsx)(l.Z,{variant:"h6",children:function(e){if(0===e.length)return"0 s";var n=0;e.forEach((function(e){n+=e.duration}));var s=Math.floor(n/60),r=n%60;return 0===s?"".concat(r," s"):"".concat(s," m, ").concat(r," s")}(Z.values.questions)})})]})]})}),(0,A.jsx)(oe,{open:y,handleClose:function(){return S(!1)},handleSubmit:function(e){return Z.setFieldValue("questions",[].concat((0,X.Z)(Z.values.questions),[e]))}}),w&&(0,A.jsx)(ue,{question:w,open:H,handleClose:function(){K(!1),b(null)},handleSubmit:function(e){return we(e)}}),(0,A.jsx)(ce,{open:k,handleClose:function(){return z(!1)},handleSubmit:function(e){return Z.setFieldValue("questions",[].concat((0,X.Z)(Z.values.questions),[e]))}}),w&&(0,A.jsx)(me,{question:w,open:ae,handleClose:function(){ie(!1),b(null)},handleSubmit:function(e){return we(e)}}),(0,A.jsx)(de,{open:P,handleClose:function(){return R(!1)},handleSubmit:function(e){return Z.setFieldValue("questions",[].concat((0,X.Z)(Z.values.questions),[e]))}}),w&&(0,A.jsx)(he,{question:w,open:Ze,handleClose:function(){ge(!1),b(null)},handleSubmit:function(e){return we(e)}}),(0,A.jsxs)("div",{className:"flex flex-col gap-3 p-3 lg:w-11/12 border rounded-xl ".concat(Z.touched.questions&&Z.errors.questions&&"border-red-500"),children:[(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsx)(l.Z,{variant:"h6",color:"primary",children:"Questions"}),(0,A.jsx)(B.Z,{variant:"outlined",startIcon:(0,A.jsx)(W.Z,{}),className:"self-end",onClick:function(e){return function(e){o(e.currentTarget)}(e)},children:"New Question"}),(0,A.jsxs)(ne.Z,{open:h,onClose:function(){o(null)},anchorEl:s,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[(0,A.jsx)(ee.Z,{disableRipple:!0,onClick:function(){return pe("MCQS")},children:"MCQS"}),(0,A.jsx)(ee.Z,{disableRipple:!0,onClick:function(){return pe("Blank")},children:"Blank"}),(0,A.jsx)(ee.Z,{disableRipple:!0,onClick:function(){return pe("TrueFalse")},children:"True/False"})]})]}),Z.values.questions.map((function(e,n){return(0,A.jsxs)(m.Z,{component:I.Z,className:"p-3 overflow-auto",children:[(0,A.jsxs)(l.Z,{variant:"body1",children:[n+1,")\xa0",e.statement]}),e.image&&e.image.name&&(0,A.jsx)("img",{src:e.image&&URL.createObjectURL(e.image),alt:"preview",className:"self-center w-full max-w-xs"}),"MCQS"===e.type&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(l.Z,{variant:"body2",children:["A:\xa0",e.A]}),(0,A.jsxs)(l.Z,{variant:"body2",children:["B:\xa0",e.B]}),(0,A.jsxs)(l.Z,{variant:"body2",children:["C:\xa0",e.C]}),(0,A.jsxs)(l.Z,{variant:"body2",children:["D:\xa0",e.D]})]}),(0,A.jsxs)("div",{className:"flex flex-col items-center justify-between gap-3 sm:flex-row",children:[(0,A.jsxs)(l.Z,{variant:"body1",children:["Answer:\xa0",e.answer]}),(0,A.jsxs)(l.Z,{variant:"body1",children:["Duration:\xa0",e.duration,"\xa0seconds"]}),(0,A.jsxs)("div",{className:"flex items-center gap-3",children:[(0,A.jsx)(t.Z,{variant:"outlined",color:"error",onClick:function(){return function(e){var n=Z.values.questions.filter((function(n){return n.id!==e}));Z.setFieldValue("questions",n)}(e.id)},children:(0,A.jsx)(Q.Z,{})}),(0,A.jsx)(t.Z,{variant:"outlined",color:"primary",onClick:function(){var n;b((function(){return e})),"MCQS"===(n=e.type)?K(!0):"Blank"===n?ie(!0):"TrueFalse"===n&&ge(!0)},children:(0,A.jsx)(E.Z,{})})]})]})]},e.id)}))]}),Z.touched.questions&&Z.errors.questions&&(0,A.jsx)("small",{className:"-mt-5 text-red-500",children:Z.errors.questions})]})}var ve=["English","Math","Physics","Chemistery","Biology","MDCAT","ECAT","STS IBA","NTS","SPSC"];function Ze(){var e=(0,i.UO)()._id,n=(0,d.I0)(),s=(0,i.s0)(),o=(0,O.useMutation)((function(n){return function(e){var n=new FormData;return n.append("_id",e._id),n.append("title",e.title),n.append("subject",e.subject),n.append("startsAt",e.startsAt),n.append("submittableBefore",e.submittableBefore),n.append("isDemo","true"===e.isDemo),n.append("questions",JSON.stringify(e.questions)),e.questions.forEach((function(e){return"object"===typeof e.image&&n.append("images",e.image)})),Y.post("/tests/update",n,{headers:{"Content-Type":"multipart/form-data"}})}((0,L.Z)((0,L.Z)({},n),{},{_id:e}))}),{onSuccess:function(){n((0,J.ws)({message:"Test updated successfully"})),s("../../tests")},onError:function(e){var s;return n((0,J.ry)({message:(null===e||void 0===e||null===(s=e.response)||void 0===s?void 0:s.data.error)||e.message}))}}),c=re.Ry({title:re.Z_().required("Title is required").min(4,"Enter at least 4 characters"),subject:re.Z_().required("Subject is required"),startsAt:re.hT().min(new Date,"Test cannot be hold in past time"),submittableBefore:re.hT().min(new Date,"Test cannot be uploaded after end time").required("End time is required"),isDemo:re.Z_(),questions:re.IX().min(3,"The test should have at least 3 questions")}),u=(0,se.TA)({initialValues:{title:"",subject:"",startsAt:new Date,submittableBefore:new Date,isDemo:"false",questions:[]},validationSchema:c,onSubmit:function(e){return o.mutate(e)}}),h=(0,O.useQuery)(["test",e],(function(){return function(e){return Y.get("/tests/".concat(e))}(e)}),{onSuccess:function(e){var n=e.data;u.setValues(n.test)},onError:function(e){var s;return n((0,J.ry)({message:(null===e||void 0===e||null===(s=e.response)||void 0===s?void 0:s.data.error)||e.message}))}}),x=h.isLoading,f=a.useState(null),j=(0,r.Z)(f,2),v=j[0],Z=j[1],g=Boolean(v);var p=a.useState(null),w=(0,r.Z)(p,2),b=w[0],C=w[1],N=a.useState(!1),y=(0,r.Z)(N,2),S=y[0],T=y[1],q=a.useState(!1),k=(0,r.Z)(q,2),z=k[0],_=k[1],F=a.useState(!1),P=(0,r.Z)(F,2),R=P[0],U=P[1],V=a.useState(!1),H=(0,r.Z)(V,2),K=H[0],te=H[1],le=a.useState(!1),ae=(0,r.Z)(le,2),ie=ae[0],xe=ae[1],fe=a.useState(!1),je=(0,r.Z)(fe,2),Ze=je[0],ge=je[1];function pe(e){"MCQS"===e?(T(!0),Z(null)):"Blank"===e?(_(!0),Z(null)):"TrueFalse"===e&&(U(!0),Z(null))}function we(e){var n=u.values.questions.findIndex((function(n){return n.id===e.id})),s=[].concat((0,X.Z)(u.values.questions.slice(0,n)),[(0,L.Z)({},e)],(0,X.Z)(u.values.questions.slice(n+1)));u.setFieldValue("questions",s)}return x?(0,A.jsx)("div",{className:"relative inset-0 flex items-center justify-center w-full h-full",children:(0,A.jsx)(D.Z,{})}):(0,A.jsxs)("form",{onSubmit:u.handleSubmit,className:"flex flex-col w-full h-full gap-6",children:[(0,A.jsxs)("div",{className:"flex justify-between w-full gap-3 lg:w-11/12",children:[(0,A.jsx)(l.Z,{variant:"h6",align:"center",children:"Update Test"}),(0,A.jsx)("div",{className:"flex items-center justify-center",children:(0,A.jsx)(B.Z,{disabled:o.isLoading,variant:"outlined",type:"submit",children:o.isLoading?(0,A.jsx)(D.Z,{}):"Update"})})]}),(0,A.jsx)("table",{children:(0,A.jsxs)("tbody",{children:[(0,A.jsxs)("tr",{className:"flex flex-col justify-between w-full lg:w-2/3 2xl:w-2/6 md:flex-row",children:[(0,A.jsx)("td",{className:"w-min-fit",children:(0,A.jsx)(l.Z,{variant:"h6",color:"primary",children:"Title"})}),(0,A.jsx)("td",{children:(0,A.jsx)(G.Z,{variant:"outlined",placeholder:"Title",size:"small",className:"w-full sm:w-60",name:"title",onChange:u.handleChange,value:u.values.title,error:u.touched.title&&u.errors.title,helperText:u.touched&&u.errors.title})})]}),(0,A.jsxs)("tr",{className:"flex flex-col justify-between w-full lg:w-2/3 2xl:w-2/6 md:flex-row",children:[(0,A.jsx)("td",{className:"w-min-fit",children:(0,A.jsx)(l.Z,{variant:"h6",color:"primary",children:"Subject"})}),(0,A.jsx)("td",{children:(0,A.jsx)($.Z,{variant:"outlined",placeholder:"Subject",size:"small",className:"w-full sm:w-60",name:"subject",onChange:u.handleChange,value:u.values.subject,error:u.touched.subject&&u.errors.subject,helperText:u.touched&&u.errors.subject,children:ve.map((function(e){return(0,A.jsx)(ee.Z,{value:e,children:e})}))})})]}),(0,A.jsxs)("tr",{className:"flex flex-col justify-between w-full lg:w-2/3 2xl:w-2/6 md:flex-row",children:[(0,A.jsx)("td",{className:"w-min-fit",children:(0,A.jsx)(l.Z,{variant:"h6",color:"primary",children:"Starts at"})}),(0,A.jsx)("td",{children:(0,A.jsx)(G.Z,{type:"datetime-local",variant:"outlined",placeholder:"Title",size:"small",className:"w-full sm:w-60",name:"startsAt",onChange:u.handleChange,value:M.Z.format(new Date(u.values.startsAt),"YYYY-MM-DDTHH:mm"),error:u.touched.startsAt&&u.errors.startsAt,helperText:u.touched&&u.errors.startsAt})})]}),(0,A.jsxs)("tr",{className:"flex flex-col justify-between w-full lg:w-2/3 2xl:w-2/6 md:flex-row",children:[(0,A.jsx)("td",{className:"min-w-fit",children:(0,A.jsx)(l.Z,{variant:"h6",color:"primary",children:"Submittable Before"})}),(0,A.jsx)("td",{children:(0,A.jsx)(G.Z,{type:"datetime-local",variant:"outlined",placeholder:"Title",size:"small",className:"w-full sm:w-60",name:"submittableBefore",onChange:u.handleChange,value:M.Z.format(new Date(u.values.submittableBefore),"YYYY-MM-DDTHH:mm"),error:u.touched.submittableBefore&&u.errors.submittableBefore,helperText:u.touched&&u.errors.submittableBefore})})]}),(0,A.jsxs)("tr",{className:"flex flex-col justify-between w-full lg:w-2/3 2xl:w-2/6 md:flex-row",children:[(0,A.jsx)("td",{className:"min-w-fit",children:(0,A.jsx)(l.Z,{variant:"h6",color:"primary",children:"Is demo:"})}),(0,A.jsx)("td",{className:"flex justify-start w-full sm:w-60",children:(0,A.jsxs)($.Z,{variant:"outlined",placeholder:"Subject",size:"small",className:"w-full sm:w-60",name:"isDemo",onChange:u.handleChange,value:u.values.isDemo,error:u.touched.isDemo&&u.errors.isDemo,helperText:u.touched&&u.errors.isDemo,children:[(0,A.jsx)(ee.Z,{value:"true",children:"Yes"}),(0,A.jsx)(ee.Z,{value:"false",children:"No"})]})})]}),(0,A.jsxs)("tr",{className:"flex flex-col justify-between w-full lg:w-2/3 2xl:w-2/6 md:flex-row",children:[(0,A.jsx)("td",{children:(0,A.jsx)(l.Z,{variant:"h6",color:"primary",children:"Duration:"})}),(0,A.jsx)("td",{children:(0,A.jsx)(l.Z,{variant:"h6",children:function(e){if(0===e.length)return"0 s";var n=0;e.forEach((function(e){n+=e.duration}));var s=Math.floor(n/60),r=n%60;return 0===s?"".concat(r," s"):"".concat(s," m, ").concat(r," s")}(u.values.questions)})})]})]})}),(0,A.jsx)(oe,{open:S,handleClose:function(){return T(!1)},handleSubmit:function(e){return u.setFieldValue("questions",[].concat((0,X.Z)(u.values.questions),[e]))}}),b&&(0,A.jsx)(ue,{question:b,open:K,handleClose:function(){te(!1),C(null)},handleSubmit:function(e){return we(e)}}),(0,A.jsx)(ce,{open:z,handleClose:function(){return _(!1)},handleSubmit:function(e){return u.setFieldValue("questions",[].concat((0,X.Z)(u.values.questions),[e]))}}),b&&(0,A.jsx)(me,{question:b,open:ie,handleClose:function(){xe(!1),C(null)},handleSubmit:function(e){return we(e)}}),(0,A.jsx)(de,{open:R,handleClose:function(){return U(!1)},handleSubmit:function(e){return u.setFieldValue("questions",[].concat((0,X.Z)(u.values.questions),[e]))}}),b&&(0,A.jsx)(he,{question:b,open:Ze,handleClose:function(){ge(!1),C(null)},handleSubmit:function(e){return we(e)}}),(0,A.jsxs)("div",{className:"flex flex-col gap-3 p-3 lg:w-11/12 border rounded-xl ".concat(u.touched.questions&&u.errors.questions&&"border-red-500"),children:[(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsx)(l.Z,{variant:"h6",color:"primary",children:"Questions"}),(0,A.jsx)(B.Z,{variant:"outlined",startIcon:(0,A.jsx)(W.Z,{}),className:"self-end",onClick:function(e){return function(e){Z(e.currentTarget)}(e)},children:"New Question"}),(0,A.jsxs)(ne.Z,{open:g,onClose:function(){Z(null)},anchorEl:v,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[(0,A.jsx)(ee.Z,{disableRipple:!0,onClick:function(){return pe("MCQS")},children:"MCQS"}),(0,A.jsx)(ee.Z,{disableRipple:!0,onClick:function(){return pe("Blank")},children:"Blank"}),(0,A.jsx)(ee.Z,{disableRipple:!0,onClick:function(){return pe("TrueFalse")},children:"True/False"})]})]}),u.values.questions.map((function(e,n){return(0,A.jsxs)(m.Z,{component:I.Z,className:"p-3 overflow-auto",children:[(0,A.jsxs)(l.Z,{variant:"body1",children:[n+1,")\xa0",e.statement]}),e.image&&(0,A.jsx)("img",{src:"string"===typeof e.image?e.image:URL.createObjectURL(e.image),alt:"preview",className:"self-center w-full max-w-xs"}),"MCQS"===e.type&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(l.Z,{variant:"body2",children:["A:\xa0",e.A]}),(0,A.jsxs)(l.Z,{variant:"body2",children:["B:\xa0",e.B]}),(0,A.jsxs)(l.Z,{variant:"body2",children:["C:\xa0",e.C]}),(0,A.jsxs)(l.Z,{variant:"body2",children:["D:\xa0",e.D]})]}),(0,A.jsxs)("div",{className:"flex flex-col items-center justify-between gap-3 sm:flex-row",children:[(0,A.jsxs)(l.Z,{variant:"body1",children:["Answer:\xa0",e.answer]}),(0,A.jsxs)(l.Z,{variant:"body1",children:["Duration:\xa0",e.duration,"\xa0seconds"]}),(0,A.jsxs)("div",{className:"flex items-center gap-3",children:[(0,A.jsx)(t.Z,{variant:"outlined",color:"error",onClick:function(){return function(e){var n=u.values.questions.filter((function(n){return n.id!==e}));u.setFieldValue("questions",n)}(e.id)},children:(0,A.jsx)(Q.Z,{})}),(0,A.jsx)(t.Z,{variant:"outlined",color:"primary",onClick:function(){var n;C((function(){return e})),"MCQS"===(n=e.type)?te(!0):"Blank"===n?xe(!0):"TrueFalse"===n&&ge(!0)},children:(0,A.jsx)(E.Z,{})})]})]})]},e.id)}))]}),u.touched.questions&&u.errors.questions&&(0,A.jsx)("small",{className:"-mt-5 text-red-500",children:u.errors.questions})]})}function ge(){var e=(0,i.UO)().testId,n=(0,d.I0)(),s=a.useState([]),t=(0,r.Z)(s,2),o=t[0],c=t[1],u=(0,O.useQuery)(["admin-submissions",e],(function(){return function(e){return Y.get("/submissions/".concat(e))}(e)}),{onSuccess:function(e){var n=e.data;return c(n.submissions)},onError:function(e){var s,r;return n((0,J.ry)({message:(null===(s=e.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.error)||e.message}))}});return u.isLoading?(0,A.jsx)("div",{className:"relative inset-0 flex items-center justify-center w-full h-full",children:(0,A.jsx)(D.Z,{})}):(0,A.jsx)(i.Z5,{children:(0,A.jsx)(i.AW,{index:!0,element:(0,A.jsxs)("div",{className:"flex flex-col w-full h-full gap-6",children:[(0,A.jsx)(l.Z,{variant:"h6",align:"center",children:"Submissions"}),(0,A.jsx)(k.Z,{className:"w-full",component:I.Z,children:(0,A.jsxs)(z.Z,{children:[(0,A.jsx)(_.Z,{children:(0,A.jsxs)(F.Z,{children:[(0,A.jsx)(P.Z,{children:"Sr. No."}),(0,A.jsx)(P.Z,{children:"Full Name"}),(0,A.jsx)(P.Z,{align:"center",children:"Email"}),(0,A.jsx)(P.Z,{align:"center",children:"Test"}),(0,A.jsx)(P.Z,{align:"center",children:"Total Correct"})]})}),(0,A.jsx)(R.Z,{children:o.map((function(e,n){return(0,A.jsxs)(F.Z,{children:[(0,A.jsx)(P.Z,{children:n+1}),(0,A.jsx)(P.Z,{children:e.submittedBy.fullName}),(0,A.jsx)(P.Z,{align:"center",children:e.submittedBy.email}),(0,A.jsx)(P.Z,{align:"center",children:e.test.title}),(0,A.jsx)(P.Z,{align:"center",children:e.totalCorrect})]},e._id)}))})]})})]})})})}function pe(){var e=(0,i.s0)(),n=(0,d.I0)(),s=a.useState([]),o=(0,r.Z)(s,2),c=o[0],u=o[1],m=(0,O.useQuery)("tests",K,{onSuccess:function(e){var n=e.data;return u(n.tests)},onError:function(e){var s,r;return n((0,J.ry)({message:(null===(s=e.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.error)||e.message}))}}),h=m.isLoading,x=m.refetch,f=(0,O.useMutation)((function(e){return function(e){return Y.delete("/tests/".concat(e))}(e)}),{onSuccess:function(e){var s=e.data;n((0,J.ws)({message:"".concat(s.test.title," deleted successfully")})),x()},onError:function(e){var s,r;return n((0,J.ry)({message:(null===(s=e.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.error)||e.message}))}});return h?(0,A.jsx)("div",{className:"relative inset-0 flex items-center justify-center w-full h-full",children:(0,A.jsx)(D.Z,{})}):(0,A.jsxs)(i.Z5,{children:[(0,A.jsx)(i.AW,{index:!0,element:(0,A.jsxs)("div",{className:"flex flex-col w-full h-full gap-6",children:[(0,A.jsx)("div",{className:"flex justify-end w-full",children:(0,A.jsx)(B.Z,{variant:"outlined",startIcon:(0,A.jsx)(W.Z,{}),onClick:function(){return e("new-test")},children:"New Test"})}),(0,A.jsx)(l.Z,{variant:"h6",align:"center",children:"Tests"}),(0,A.jsx)(k.Z,{className:"w-full",component:I.Z,children:(0,A.jsxs)(z.Z,{children:[(0,A.jsx)(_.Z,{children:(0,A.jsxs)(F.Z,{children:[(0,A.jsx)(P.Z,{children:"Sr. No."}),(0,A.jsx)(P.Z,{children:"Test Title"}),(0,A.jsx)(P.Z,{align:"center",children:"Subject"}),(0,A.jsx)(P.Z,{align:"center",children:"Starts At"}),(0,A.jsx)(P.Z,{align:"center",children:"Submittable Before"}),(0,A.jsx)(P.Z,{align:"center",children:"Action"})]})}),(0,A.jsx)(R.Z,{children:c.map((function(s,r){return(0,A.jsxs)(F.Z,{children:[(0,A.jsx)(P.Z,{children:r}),(0,A.jsx)(P.Z,{children:s.title}),(0,A.jsx)(P.Z,{align:"center",children:s.subject}),(0,A.jsx)(P.Z,{align:"center",style:{minWidth:"100px"},children:M.Z.format(new Date(s.startsAt),"DD-MMM-YYYY hh:mm A")}),(0,A.jsx)(P.Z,{align:"center",style:{minWidth:"100px"},children:M.Z.format(new Date(s.submittableBefore),"DD-MMM-YYYY hh:mm A")}),(0,A.jsxs)(P.Z,{align:"center",children:[(0,A.jsx)(t.Z,{onClick:function(){return e("update/".concat(s._id))},children:(0,A.jsx)(E.Z,{})}),(0,A.jsx)(t.Z,{onClick:function(){return function(e){var s=c.find((function(n){return n._id===e})),r=new Date,t=new Date(s.startsAt),l=new Date(s.submittableBefore);M.Z.subtract(l,r).toSeconds()>0&&M.Z.subtract(r,t).toSeconds()>0?n((0,J.ry)({message:"Can not delete test while it is active"})):f.mutate(e)}(s._id)},children:(0,A.jsx)(Q.Z,{})}),(0,A.jsx)(t.Z,{onClick:function(){return e("submissions/".concat(s._id))},children:"Result"})]})]},s._id)}))})]})})]})}),(0,A.jsx)(i.AW,{path:"/new-test",setTests:u,element:(0,A.jsx)(je,{})}),(0,A.jsx)(i.AW,{path:"/update/:_id",setTests:u,element:(0,A.jsx)(Ze,{})}),(0,A.jsx)(i.AW,{path:"/:id",element:(0,A.jsx)("h1",{children:"View Test"})}),(0,A.jsx)(i.AW,{path:"/submissions/:testId/*",element:(0,A.jsx)(ge,{})})]})}var we=s(7246),be=s(3710),Ce=s(4554),Ne=V().create({baseURL:"".concat("/api","/admin/students")});function ye(e){return Ne.get("?page=".concat(e))}function Se(e){return Ne.delete("/".concat(e))}Ne.interceptors.request.use((function(e){return(0,L.Z)((0,L.Z)({},e),{},{headers:(0,L.Z)((0,L.Z)({},e.headers),{},{common:(0,L.Z)((0,L.Z)({},e.headers.common),{},{authorization:"Bearer ".concat(localStorage.getItem("hts-token"))})})})}));var Ae=s(5186);function Te(){var e=(0,d.I0)(),n=(0,i.UO)()._id,s=a.useState([]),t=(0,r.Z)(s,2),o=t[0],c=t[1],u=(0,O.useQuery)(["admin-student-submissions"],(function(){return e=n,Ne.get("/".concat(e,"/tests"));var e}),{onSuccess:function(e){var n=e.data;return c(n.submissions)},onError:function(n){var s,r;return e((0,J.ry)({message:(null===(s=n.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.error)||n.message}))}}).isLoading;return(0,A.jsxs)("div",{className:"flex flex-col w-full h-full gap-6",children:[(0,A.jsx)(l.Z,{variant:"h6",align:"center",children:"Student Name"}),(0,A.jsx)(k.Z,{className:"w-full",component:I.Z,children:(0,A.jsxs)(z.Z,{children:[(0,A.jsx)(_.Z,{children:(0,A.jsxs)(F.Z,{children:[(0,A.jsx)(P.Z,{children:"Sr. No."}),(0,A.jsx)(P.Z,{children:"Test Title"}),(0,A.jsx)(P.Z,{align:"center",children:"Subject"}),(0,A.jsx)(P.Z,{align:"center",children:"Date Conducted"}),(0,A.jsx)(P.Z,{align:"center",children:"Obtained Marks"}),(0,A.jsx)(P.Z,{align:"center",children:"Total Marks"})]})}),(0,A.jsxs)(Ae.If,{condition:u,children:[(0,A.jsx)(Ae.Zf,{children:(0,A.jsx)(Ce.Z,{display:"flex",width:"100%",height:"100%",children:(0,A.jsx)(D.Z,{sx:{m:"auto"}})})}),(0,A.jsx)(Ae.Ot,{children:(0,A.jsx)(R.Z,{children:o.map((function(e,n){return(0,A.jsxs)(F.Z,{children:[(0,A.jsx)(P.Z,{children:n}),(0,A.jsx)(P.Z,{children:e.test.title}),(0,A.jsx)(P.Z,{align:"center",children:e.test.subject}),(0,A.jsx)(P.Z,{align:"center",children:e.test.startedAt}),(0,A.jsx)(P.Z,{align:"center",children:e.totalCorrect}),(0,A.jsx)(P.Z,{align:"center",children:e.test.totalMarks})]},e.id)}))})})]})]})})]})}function qe(){var e=(0,i.s0)(),n=(0,d.I0)(),s=a.useState(1),o=(0,r.Z)(s,2),c=o[0],u=o[1],m=a.useState([]),h=(0,r.Z)(m,2),x=h[0],f=h[1],j=(0,O.useQueryClient)(),v=(0,O.useQuery)(["admin-students",c],(function(){return ye(c)}),{onSuccess:function(e){var n=e.data;return f(n.students)},onError:function(e){var s,r;return n((0,J.ry)({message:(null===(s=e.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.error)||e.message}))}}).isLoading,Z=(0,O.useMutation)((function(e){return Se(e)}),{onSuccess:function(){j.invalidateQueries("admin-students"),(0,J.ws)({message:"Student deleted successfully"})},onError:function(e){var s,r;return n((0,J.ry)({message:(null===(s=e.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.error)||e.message}))}}).mutate;return v?(0,A.jsx)("div",{className:"relative inset-0 flex items-center justify-center w-full h-full",children:(0,A.jsx)(D.Z,{})}):(0,A.jsxs)(i.Z5,{children:[(0,A.jsx)(i.AW,{index:!0,element:(0,A.jsxs)("div",{className:"flex flex-col w-full h-full gap-6",children:[(0,A.jsx)(l.Z,{variant:"h6",align:"center",children:"Students"}),(0,A.jsx)(k.Z,{className:"w-full",component:I.Z,children:(0,A.jsxs)(z.Z,{children:[(0,A.jsx)(_.Z,{children:(0,A.jsxs)(F.Z,{children:[(0,A.jsx)(P.Z,{children:"Sr. No."}),(0,A.jsx)(P.Z,{children:"Full Name"}),(0,A.jsx)(P.Z,{align:"center",children:"Email"}),(0,A.jsx)(P.Z,{align:"center",children:"CNIC"}),(0,A.jsx)(P.Z,{align:"center",children:"Action"})]})}),(0,A.jsx)(R.Z,{children:x.map((function(n,s){return(0,A.jsxs)(F.Z,{children:[(0,A.jsx)(P.Z,{children:s+1}),(0,A.jsx)(P.Z,{role:"button",onClick:function(){return e("".concat(n._id))},children:n.fullName}),(0,A.jsx)(P.Z,{align:"center",children:n.email}),(0,A.jsx)(P.Z,{align:"center",children:n.cnic}),(0,A.jsxs)(P.Z,{align:"center",children:[(0,A.jsx)(t.Z,{onClick:function(){return e("update/".concat(n._id))},children:(0,A.jsx)(be.Z,{})}),(0,A.jsx)(t.Z,{onClick:function(){return Z(n._id)},children:(0,A.jsx)(Q.Z,{})})]})]},n._id)}))})]})}),(0,A.jsx)(we.Z,{className:"mx-auto",count:10,page:c,onChange:function(e,n){return u(n)}})]})}),(0,A.jsx)(i.AW,{path:"/:_id",element:(0,A.jsx)(Te,{})})]})}var De=s(1889),Be=["English","Math","Physics","Chemistery","Biology","MDCAT","ECAT","STS IBA","NTS","SPSC"];function ke(){var e=re.Ry({fullName:re.Z_().required("Full Name is required").min(2,"Full Name should be at least 2 characters long"),email:re.Z_().required("Email is required").email("Enter a valid email"),password:re.Z_().required("Password is required").min(8,"Password should be at least 8 characters long"),subjects:re.IX().min(1,"At least one subject is required"),cnic:re.Rx().required("CNIC is required").min(1e12,"Enter a valid CNIC").max(9999999999999,"Enter a valid CNIC")}),n=(0,se.TA)({initialValues:{fullName:"",email:"",password:"",cnic:0,subjects:[]},validationSchema:e,onSubmit:function(e){return console.log(e)}});return(0,A.jsxs)("div",{className:"flex flex-col w-full h-full gap-6",children:[(0,A.jsx)(l.Z,{variant:"h6",align:"center",children:"New Teacher"}),(0,A.jsx)(De.ZP,{container:!0,direction:"column",rowSpacing:3,maxWidth:"md",children:(0,A.jsxs)(De.ZP,{item:!0,container:!0,component:"form",onSubmit:n.handleSubmit,xs:12,lg:8,alignItems:"center",rowSpacing:1,children:[(0,A.jsx)(De.ZP,{item:!0,xs:4,md:4,lg:3,children:(0,A.jsx)(l.Z,{variant:"body1",children:"Full Name"})}),(0,A.jsx)(De.ZP,{item:!0,xs:8,md:8,lg:9,children:(0,A.jsx)(G.Z,{fullWidth:!0,size:"small",name:"fullName",value:n.values.fullName,onChange:n.handleChange,error:n.touched.fullName&&Boolean(n.errors.fullName),helperText:n.touched.fullName&&n.errors.fullName})}),(0,A.jsx)(De.ZP,{item:!0,xs:4,md:4,lg:3,children:(0,A.jsx)(l.Z,{variant:"body1",children:"Email"})}),(0,A.jsx)(De.ZP,{item:!0,xs:8,md:8,lg:9,children:(0,A.jsx)(G.Z,{fullWidth:!0,size:"small",name:"email",value:n.values.email,onChange:n.handleChange,error:n.touched.email&&Boolean(n.errors.email),helperText:n.touched.email&&n.errors.email})}),(0,A.jsx)(De.ZP,{item:!0,xs:4,md:4,lg:3,children:(0,A.jsx)(l.Z,{variant:"body1",children:"Password"})}),(0,A.jsx)(De.ZP,{item:!0,xs:8,md:8,lg:9,children:(0,A.jsx)(G.Z,{fullWidth:!0,size:"small",name:"password",value:n.values.password,onChange:n.handleChange,error:n.touched.password&&Boolean(n.errors.password),helperText:n.touched.password&&n.errors.password})}),(0,A.jsx)(De.ZP,{item:!0,xs:4,md:4,lg:3,children:(0,A.jsx)(l.Z,{variant:"body1",children:"CNIC"})}),(0,A.jsx)(De.ZP,{item:!0,xs:8,md:8,lg:9,children:(0,A.jsx)(G.Z,{fullWidth:!0,type:"number",size:"small",name:"cnic",value:n.values.cnic,onChange:n.handleChange,error:n.touched.cnic&&Boolean(n.errors.cnic),helperText:n.touched.cnic&&n.errors.cnic})}),(0,A.jsx)(De.ZP,{item:!0,xs:4,md:4,lg:3,children:(0,A.jsx)(l.Z,{variant:"body1",children:"Subjects"})}),(0,A.jsxs)(De.ZP,{item:!0,xs:8,md:8,lg:9,children:[(0,A.jsx)($.Z,{variant:"outlined",fullWidth:!0,size:"small",multiple:!0,name:"subjects",onChange:n.handleChange,value:n.values.subjects,error:n.touched.subjects&&Boolean(n.errors.subjects),children:Be.map((function(e){return(0,A.jsx)(ee.Z,{value:e,children:e})}))}),n.touched&&n.errors.subjects&&(0,A.jsx)(l.Z,{className:"pl-3 my-1 text-xs text-red-500",children:n.touched&&n.errors.subjects})]}),(0,A.jsx)(De.ZP,{item:!0,xs:12,className:"flex items-center justify-center",children:(0,A.jsx)(B.Z,{type:"submit",variant:"outlined",startIcon:(0,A.jsx)(W.Z,{}),children:"Add"})})]})})]})}function Ie(){var e=(0,i.s0)();return(0,A.jsxs)(i.Z5,{children:[(0,A.jsx)(i.AW,{index:!0,element:(0,A.jsxs)("div",{className:"flex flex-col w-full h-full gap-6",children:[(0,A.jsx)("div",{className:"flex justify-end w-full",children:(0,A.jsx)(B.Z,{variant:"outlined",startIcon:(0,A.jsx)(W.Z,{}),onClick:function(){return e("new-teacher")},children:"New Teacher"})}),(0,A.jsx)(l.Z,{variant:"h6",align:"center",children:"Teachers"}),(0,A.jsx)(k.Z,{className:"w-full",component:I.Z,children:(0,A.jsxs)(z.Z,{children:[(0,A.jsx)(_.Z,{children:(0,A.jsxs)(F.Z,{children:[(0,A.jsx)(P.Z,{children:"Sr. No."}),(0,A.jsx)(P.Z,{children:"Full Name"}),(0,A.jsx)(P.Z,{align:"center",children:"Email"}),(0,A.jsx)(P.Z,{align:"center",children:"Subjects"}),(0,A.jsx)(P.Z,{align:"center",children:"Action"})]})}),(0,A.jsx)(R.Z,{children:[].map((function(n,s){return(0,A.jsxs)(F.Z,{children:[(0,A.jsx)(P.Z,{children:s}),(0,A.jsx)(P.Z,{children:n.fullName}),(0,A.jsx)(P.Z,{children:n.subjects.join(",")}),(0,A.jsx)(P.Z,{align:"center",children:n.subject}),(0,A.jsxs)(P.Z,{align:"center",children:[(0,A.jsx)(t.Z,{onClick:function(){return e("update/".concat(n.id))},children:(0,A.jsx)(E.Z,{})}),(0,A.jsx)(t.Z,{children:(0,A.jsx)(Q.Z,{})})]})]},n.id)}))})]})})]})}),(0,A.jsx)(i.AW,{path:"/new-teacher",element:(0,A.jsx)(ke,{})}),(0,A.jsx)(i.AW,{path:"/update/:id",element:(0,A.jsx)("h1",{children:"Update teacher"})}),(0,A.jsx)(i.AW,{path:"/:id",element:(0,A.jsx)("h1",{children:"View Teacher"})})]})}function ze(){var e=(0,d.I0)(),n=(0,i.s0)(),s=(0,O.useQueryClient)(),r=(0,O.useMutation)((function(e){return n=e,Y.post("/announcements",n);var n}),{onSuccess:function(r){r.data;e((0,J.ws)({message:"Announcement added successfully"})),s.invalidateQueries("announcements"),n(-1)},onError:function(n){var s,r;return e((0,J.ry)({message:(null===(s=n.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.error)||n.message}))}}),t=r.isLoading,a=r.mutate,o=re.Ry({title:re.Z_().min(2,"Title should be at least 2 characters long").required("Title is required"),details:re.Z_().min(3,"Details should be at least 3 characters long").required("Details are required"),link:re.Z_().matches(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/,"Link should be valid").test("emptyLink","Link can be empty",(function(e){return""!==e})),isImportant:re.Xg("isImportant should be boolean")}),c=(0,se.TA)({initialValues:{title:"",details:"",link:"",isImportant:!1},validationSchema:o,onSubmit:function(e){return a((0,L.Z)((0,L.Z)({},e),{},{link:e.link||void 0}))}});return(0,A.jsxs)("div",{className:"flex flex-col w-full h-full gap-6",children:[(0,A.jsx)(l.Z,{variant:"h6",align:"center",children:"New Announcement"}),(0,A.jsx)(De.ZP,{container:!0,direction:"column",rowSpacing:3,maxWidth:"md",children:(0,A.jsxs)(De.ZP,{item:!0,container:!0,component:"form",onSubmit:c.handleSubmit,xs:12,lg:8,alignItems:"center",rowSpacing:1,children:[(0,A.jsx)(De.ZP,{item:!0,xs:4,md:4,lg:3,children:(0,A.jsx)(l.Z,{variant:"body1",children:"Title"})}),(0,A.jsx)(De.ZP,{item:!0,xs:8,md:8,lg:9,children:(0,A.jsx)(G.Z,{fullWidth:!0,size:"small",name:"title",value:c.values.title,onChange:c.handleChange,error:c.touched.title&&Boolean(c.errors.title),helperText:c.touched.title&&c.errors.title})}),(0,A.jsx)(De.ZP,{item:!0,xs:4,md:4,lg:3,children:(0,A.jsx)(l.Z,{variant:"body1",children:"Details"})}),(0,A.jsx)(De.ZP,{item:!0,xs:8,md:8,lg:9,children:(0,A.jsx)(G.Z,{fullWidth:!0,size:"small",multiline:!0,minRows:2,name:"details",value:c.values.details,onChange:c.handleChange,error:c.touched.details&&Boolean(c.errors.details),helperText:c.touched.details&&c.errors.details})}),(0,A.jsx)(De.ZP,{item:!0,xs:4,md:4,lg:3,children:(0,A.jsx)(l.Z,{variant:"body1",children:"Link"})}),(0,A.jsx)(De.ZP,{item:!0,xs:8,md:8,lg:9,children:(0,A.jsx)(G.Z,{fullWidth:!0,size:"small",name:"link",value:c.values.link,onChange:c.handleChange,error:c.touched.link&&Boolean(c.errors.link),helperText:c.touched.link&&c.errors.link})}),(0,A.jsx)(De.ZP,{item:!0,xs:4,md:4,lg:3,children:(0,A.jsx)(l.Z,{variant:"body1",children:"Important"})}),(0,A.jsxs)(De.ZP,{item:!0,xs:8,md:8,lg:9,children:[(0,A.jsxs)($.Z,{variant:"outlined",fullWidth:!0,size:"small",name:"isImportant",onChange:function(e){return c.setFieldValue("isImportant",Boolean(e.target.value))},value:c.values.isImportant,error:c.touched.isImportant&&Boolean(c.errors.isImportant),children:[(0,A.jsx)(ee.Z,{value:"true",children:"Yes"}),(0,A.jsx)(ee.Z,{value:"false",children:"No"})]}),c.touched&&c.errors.isImportant&&(0,A.jsx)(l.Z,{className:"pl-3 my-1 text-xs text-red-500",children:c.touched&&c.errors.isImportant})]}),(0,A.jsx)(De.ZP,{item:!0,xs:12,className:"flex items-center justify-center",children:(0,A.jsx)(B.Z,{type:"submit",disabled:t,variant:"outlined",startIcon:(0,A.jsx)(W.Z,{}),children:t?(0,A.jsx)(D.Z,{}):"Add"})})]})})]})}function _e(){var e=(0,i.s0)(),n=(0,d.I0)(),s=(0,O.useQueryClient)(),o=a.useState([]),c=(0,r.Z)(o,2),u=c[0],m=c[1],h=(0,O.useQuery)("announcements",H,{onSuccess:function(e){var n=e.data;return m(n.announcements)},onError:function(e){var s,r;return n((0,J.ry)({message:(null===(s=e.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.error)||e.message}))}}).isLoading,x=(0,O.useMutation)((function(e){return function(e){return Y.delete("/announcements/".concat(e))}(e)}),{onSuccess:function(e){var r=e.data;n((0,J.ws)({message:"".concat(r.announcement.title," deleted successfully")})),s.invalidateQueries("announcements")},onError:function(e){var s,r;return n((0,J.ry)({message:(null===(s=e.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.error)||e.message}))}});return h?(0,A.jsx)("div",{className:"relative inset-0 flex items-center justify-center w-full h-full",children:(0,A.jsx)(D.Z,{})}):(0,A.jsxs)(i.Z5,{children:[(0,A.jsx)(i.AW,{index:!0,element:(0,A.jsxs)("div",{className:"flex flex-col w-full h-full gap-6",children:[(0,A.jsx)("div",{className:"flex justify-end w-full",children:(0,A.jsx)(B.Z,{variant:"outlined",startIcon:(0,A.jsx)(W.Z,{}),onClick:function(){return e("new-announcement")},children:"New Announcement"})}),(0,A.jsx)(l.Z,{variant:"h6",align:"center",children:"Announcements"}),(0,A.jsx)(k.Z,{className:"w-full",component:I.Z,children:(0,A.jsxs)(z.Z,{children:[(0,A.jsx)(_.Z,{children:(0,A.jsxs)(F.Z,{children:[(0,A.jsx)(P.Z,{children:"Sr. No."}),(0,A.jsx)(P.Z,{children:"Title"}),(0,A.jsx)(P.Z,{align:"center",children:"Important"}),(0,A.jsx)(P.Z,{align:"center",children:"Action"})]})}),(0,A.jsx)(R.Z,{children:u.map((function(e,n){return(0,A.jsxs)(F.Z,{children:[(0,A.jsx)(P.Z,{children:n+1}),(0,A.jsx)(P.Z,{children:e.title}),(0,A.jsx)(P.Z,{align:"center",children:e.isImportant?"Yes":"No"}),(0,A.jsx)(P.Z,{align:"center",children:(0,A.jsx)(t.Z,{onClick:function(){return n=e._id,void x.mutate(n);var n},children:(0,A.jsx)(Q.Z,{})})})]},e._id)}))})]})})]})}),(0,A.jsx)(i.AW,{path:"/new-announcement",element:(0,A.jsx)(ze,{})})]})}var Fe=s(318),Pe=s(5930);s(1987);function Re(){var e=(0,d.I0)(),n=a.useState([]),s=(0,r.Z)(n,2),i=s[0],o=s[1],c=a.useState([]),u=(0,r.Z)(c,2),m=u[0],h=u[1],x=a.useState(!1),f=(0,r.Z)(x,2),j=f[0],v=f[1],Z=a.useState({}),g=(0,r.Z)(Z,2),p=g[0],w=g[1];(0,O.useQuery)("tests",K,{onSuccess:function(e){var n=e.data;h(n.tests)},onError:function(n){var s,r;return e((0,J.ry)({message:(null===(s=n.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.error)||n.message}))}});var C=(0,O.useQuery)(["testApplications",p._id],(function(){return e=p._id,Y.get("/test-applications/".concat(e));var e}),{onSuccess:function(e){var n=e.data;o(n.applications)},onError:function(n){var s,r;return e((0,J.ry)({message:(null===(s=n.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.error)||n.message}))}}),N=C.isLoading,y=C.refetch,S=(0,O.useMutation)((function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{_id:"undefined",approved:!1};return Y.put("/test-applications/",e)}(e)}),{onSuccess:function(){e((0,J.ws)({message:"Application updated successfully"})),y(p._id)},onError:function(n){var s,r;return e((0,J.ry)({message:(null===(s=n.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.error)||n.message}))}}),T=S.mutate;return N?(0,A.jsx)("div",{className:"relative inset-0 flex items-center justify-center w-full h-full",children:(0,A.jsx)(D.Z,{})}):(0,A.jsxs)("div",{className:"flex flex-col w-full h-full gap-6",children:[(0,A.jsxs)("div",{className:"flex justify-end w-full gap-2 items-center",children:[(0,A.jsxs)($.Z,{title:"Select Test",className:"min-w-16",size:"small",value:p._id||"select-test",onChange:function(e){var n=m.find((function(n){return n._id===e.target.value}));w(n)},children:[null===m||void 0===m?void 0:m.map((function(e){return(0,A.jsx)(ee.Z,{value:e._id,children:e.title},e._id)})),(0,A.jsx)(ee.Z,{value:"select-test",disabled:!0,children:"Select Test"})]}),(0,A.jsxs)($.Z,{title:"Select Status",className:"min-w-16",size:"small",value:j,onChange:function(e){return v("true"===e.target.value)},children:[(0,A.jsx)(ee.Z,{value:"true",children:"Approved"}),(0,A.jsx)(ee.Z,{value:"false",children:"Rejected"})]})]}),(0,A.jsx)(l.Z,{variant:"h6",align:"center",children:"Test Applications"}),(0,A.jsx)(k.Z,{className:"w-full",component:I.Z,children:(0,A.jsxs)(z.Z,{children:[(0,A.jsx)(_.Z,{children:(0,A.jsxs)(F.Z,{children:[(0,A.jsx)(P.Z,{children:"Sr. No."}),(0,A.jsx)(P.Z,{children:"Test Title"}),(0,A.jsx)(P.Z,{align:"center",children:"Subject"}),(0,A.jsx)(P.Z,{align:"center",children:"Student"}),(0,A.jsx)(P.Z,{align:"center",children:"Email"}),(0,A.jsx)(P.Z,{align:"center",children:"Image"}),(0,A.jsx)(P.Z,{align:"center",children:"Action"})]})}),(0,A.jsx)(R.Z,{children:i.filter((function(e){return e.approved===j})).map((function(e,n){return(0,A.jsxs)(F.Z,{children:[(0,A.jsx)(P.Z,{children:n}),(0,A.jsx)(P.Z,{children:e.test.title}),(0,A.jsx)(P.Z,{align:"center",children:e.test.subject}),(0,A.jsx)(P.Z,{align:"center",style:{minWidth:"100px"},children:e.student.fullName}),(0,A.jsx)(P.Z,{align:"center",style:{minWidth:"100px"},children:e.student.email}),(0,A.jsx)(P.Z,{align:"center",children:(0,A.jsx)(Pe.TV,{children:(0,A.jsx)(Pe.HI,{src:"".concat("/api","/challans/").concat(e.image),children:(0,A.jsx)("img",{src:"".concat("/api","/challans/").concat(e.image),alt:"application",className:"w-8 h-8"})})})}),(0,A.jsxs)(P.Z,{align:"center",children:[(0,A.jsx)(t.Z,{onClick:function(){return T({_id:e._id,approved:!0})},children:(0,A.jsx)(Fe.Z,{color:e.approved?"primary":"inherit"})}),(0,A.jsx)(t.Z,{onClick:function(){return T({_id:e._id,approved:!1})},children:(0,A.jsx)(b.Z,{color:e.approved?"inherit":"error"})})]})]},e._id)}))})]})})]})}function We(){var e=(0,d.I0)(),n=a.useState(!1),s=(0,r.Z)(n,2),u=s[0],m=s[1];return(0,d.v9)((function(e){return e})).account.admin?(0,A.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,A.jsx)(q,{open:u,setOpen:m}),(0,A.jsxs)("section",{className:"flex-grow md:w-9/12 lg:w-9/12 2xl:w-10/12",children:[(0,A.jsxs)("div",{className:"flex ".concat(u?"justify-between":"justify-end"," w-full py-2 px-4 border-b"),style:{minHeight:"40px"},children:[(0,A.jsx)(t.Z,{className:"block md:hidden",onClick:function(){return m(!0)},children:(0,A.jsx)(o.Z,{})}),(0,A.jsx)(l.Z,{variant:"h5",className:"flex items-center justify-center flex-grow",children:"Admin"}),(0,A.jsx)(t.Z,{onClick:function(){e({type:"LOGOUT"}),localStorage.removeItem("hts-token")},children:(0,A.jsx)(c.Z,{})})]}),(0,A.jsx)("div",{className:"block p-3",children:(0,A.jsxs)(i.Z5,{children:[(0,A.jsx)(i.AW,{index:!0,element:(0,A.jsx)(i.Fg,{replace:!0,to:"dashboard"})}),(0,A.jsx)(i.AW,{path:"/dashboard",element:(0,A.jsx)("h1",{children:"Admin dashboard"})}),(0,A.jsx)(i.AW,{path:"/announcements/*",element:(0,A.jsx)(_e,{})}),(0,A.jsx)(i.AW,{path:"/students/*",element:(0,A.jsx)(qe,{})}),(0,A.jsx)(i.AW,{path:"/teachers/*",element:(0,A.jsx)(Ie,{})}),(0,A.jsx)(i.AW,{path:"/profile",element:(0,A.jsx)("h1",{children:"Admin profile"})}),(0,A.jsx)(i.AW,{path:"/tests/*",element:(0,A.jsx)(pe,{})}),(0,A.jsx)(i.AW,{path:"/test-applications/*",element:(0,A.jsx)(Re,{})})]})})]})]}):(0,A.jsx)(i.Fg,{replace:!0,to:"/login/admin"})}}}]);
//# sourceMappingURL=480.ee1d73e6.chunk.js.map